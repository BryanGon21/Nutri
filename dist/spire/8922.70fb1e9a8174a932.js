"use strict";(self.webpackChunkspire=self.webpackChunkspire||[]).push([[8922],{8922:(At,T,n)=>{n.r(T),n.d(T,{RecetasModule:()=>Rt});var u=n(6814),p=n(2787),v=n(4368),R=n(1476),m=n(5313),s=n(6223),C=n(9347),A=n(4716),J=n(3519),d=n.n(J),t=n(9212),x=n(4400),Q=n(7398),U=n(9862);let q=(()=>{class e extends x.B{constructor(o){super(o),this.httpClient=o,this.baseUrl="/recetas"}crearRecetas(o){return this.httpClient.post(this.baseUrl,o).pipe((0,Q.U)(r=>r))}static#t=this.\u0275fac=function(r){return new(r||e)(t.LFG(U.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),B=(()=>{class e extends x.B{constructor(o){super(o),this.httpClient=o,this.baseUrl="/tipocomidas"}static#t=this.\u0275fac=function(r){return new(r||e)(t.LFG(U.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var N=n(617),h=n(4170),F=n(2032),f=n(2296),E=n(8525),S=n(3680);function D(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Nombre es requerido "),t.qZA())}function k(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Calorias es requerido "),t.qZA())}function w(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," El numero de Proteinas es requerido "),t.qZA())}function O(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," El numero de Carbohidratos es requerido "),t.qZA())}function G(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," El numero de Grasas es requerido "),t.qZA())}function M(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," El numero de Ingredientes es requerido "),t.qZA())}function H(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Por favor ingrese una Instrucciones "),t.qZA())}function j(e,a){if(1&e&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.nombre," ")}}function P(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Por favor ingrese un tipo de comida "),t.qZA())}function z(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"tr")(1,"th",33),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"input",34),t.qZA(),t.TgZ(5,"td")(6,"div",25)(7,"a",35),t.NdJ("click",function(){const c=t.CHM(o).index,l=t.oxw();return t.KtG(l.restarUno(c))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()()()}if(2&e){const o=a.$implicit,r=a.index;t.xp6(2),t.Oqu(r+1),t.xp6(2),t.Q6J("formControl",o.get("nombre"))}}let b=(()=>{class e{get restricciones(){return this.form.get("restricciones")}constructor(o,r,i,c,l,g,_,Z){this.fb=o,this.recetaService=r,this.tipoComiService=i,this.route=c,this.router=l,this.datePipe=g,this.dialogRef=_,this.data=Z,this.isLoading=!1,this.submitted=!1}ngOnInit(){this.tipoComida(),!0===this.data.estado&&(this.receta_id=this.data.id,console.log("Aqui toy>>>",this.receta_id),this.getById()),this.crearFormulario(),this.control=this.form.controls.restricciones}crearFormulario(){this.form=this.fb.group({nombre:["",[s.kI.required]],calorias:["",[s.kI.required]],proteinas:["",[s.kI.required]],carbohidratos:["",[s.kI.required]],grasas:["",[s.kI.required]],ingredientes:["",[s.kI.required]],instrucciones:["",[s.kI.required]],tipo_comida_id:["",[s.kI.required]],restricciones:this.fb.array([])})}createFormRestricciones(){return this.fb.group({nombre:["",s.kI.required]})}getById(){this.recetaService.getById(this.receta_id).subscribe(o=>{this.tipoComiService.getById(o.tipo_comida_id).subscribe(r=>{this.form.patchValue({nombre:o.nombre,calorias:o.calorias,proteinas:o.proteinas,carbohidratos:o.carbohidratos,grasas:o.grasas,ingredientes:o.ingredientes,instrucciones:o.instrucciones,tipo_comida_id:o.tipo_comida_id,tipo_comida_nombre:r.nombre}),o.restricciones.forEach((i,c)=>{this.sumarUno(),this.control.controls[c].patchValue({nombre:i.nombre})})},r=>{console.error("Error al obtener el tipo de comida:",r)})},o=>{console.error("Error al obtener la receta:",o)})}tipoComida(){this.tipoComiService.getEnabledList().subscribe(o=>{this.tipocomida=o,console.log("TIPO COMIDA>>>",this.tipocomida)})}sumarControl(){this.control.push(this.createFormRestricciones())}sumarUno(){this.control.push(this.createFormRestricciones())}restarUno(o){for(let r=0;r<this.control.controls.length;r++)o===r&&this.form.controls.restricciones.removeAt(r)}listarReceta(){this.recetaService.getAll().subscribe(o=>{this.receta=o})}registrarReceta(o){this.isLoading=!0,this.submitted=!0,this.receta_id?this.recetaService.update(this.receta_id,o).pipe((0,A.x)(()=>{this.form.markAsPristine(),this.isLoading=!1})).subscribe(r=>{d().fire({position:"center",icon:"success",title:r.success,showConfirmButton:!1,timer:1500}),this.dialogRef.close(r)},r=>{d().fire({icon:"error",title:"Oops...",text:r.error+" Error"})}):this.recetaService.create(o).pipe((0,A.x)(()=>{this.form.markAsPristine(),this.isLoading=!1})).subscribe(r=>{d().fire({position:"center",icon:"success",title:r.success,showConfirmButton:!1,timer:1500}),this.dialogRef.close(r)},r=>{d().fire({icon:"error",title:"Oops...",text:r.error+" Error"})})}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(s.qu),t.Y36(q),t.Y36(B),t.Y36(p.gz),t.Y36(p.F0),t.Y36(u.uU),t.Y36(C.so),t.Y36(C.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-crear-receta"]],features:[t._Bn([u.uU])],decls:88,vars:14,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["mat-dialog-content",""],[1,"m-3",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","nombre","required",""],[4,"ngIf"],["matInput","","formControlName","calorias","required",""],["matInput","","formControlName","proteinas","required",""],["matInput","","formControlName","carbohidratos","required",""],["matInput","","formControlName","grasas","required",""],["matInput","","formControlName","ingredientes","required",""],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["matInput","","formControlName","instrucciones"],["formControlName","tipo_comida_id"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table","table-borderless"],["scope","col"],[1,"d-flex","order-actions"],["mat-mini-fab","","color","primary",3,"click"],[4,"ngFor","ngForOf"],[1,"row","mt-5"],[1,"example-button-row"],["type","submit","mat-button","",1,"btn","btn-primary","btn-lg",3,"disabled"],["type","button","mat-raised-button","","color","warn","tabindex","-1",3,"routerLink"],[3,"value"],["scope","row"],["type","text",1,"form-control",3,"formControl"],["mat-mini-fab","",1,"bg-color-red",3,"click"]],template:function(r,i){if(1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5),t.qZA()()(),t.TgZ(6,"button",5),t.NdJ("click",function(){return i.dialogRef.close()}),t.TgZ(7,"mat-icon"),t._uU(8,"close"),t.qZA()()(),t.TgZ(9,"div",6)(10,"form",7),t.NdJ("ngSubmit",function(){return i.registrarReceta(i.form.value)}),t.TgZ(11,"div",8)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),t._uU(15,"Nombre"),t.qZA(),t._UZ(16,"input",11),t.YNc(17,D,2,0,"mat-error",12),t.qZA()(),t.TgZ(18,"div",9)(19,"mat-form-field",10)(20,"mat-label"),t._uU(21,"Calorias"),t.qZA(),t._UZ(22,"input",13),t.YNc(23,k,2,0,"mat-error",12),t.qZA()()(),t.TgZ(24,"div",8)(25,"div",9)(26,"mat-form-field",10)(27,"mat-label"),t._uU(28,"Proteinas"),t.qZA(),t._UZ(29,"input",14),t.YNc(30,w,2,0,"mat-error",12),t.qZA()(),t.TgZ(31,"div",9)(32,"mat-form-field",10)(33,"mat-label"),t._uU(34,"Carbohidratos"),t.qZA(),t._UZ(35,"input",15),t.YNc(36,O,2,0,"mat-error",12),t.qZA()()(),t.TgZ(37,"div",8)(38,"div",9)(39,"mat-form-field",10)(40,"mat-label"),t._uU(41,"Grasas"),t.qZA(),t._UZ(42,"input",16),t.YNc(43,G,2,0,"mat-error",12),t.qZA()(),t.TgZ(44,"div",9)(45,"mat-form-field",10)(46,"mat-label"),t._uU(47,"Ingredientes"),t.qZA(),t._UZ(48,"input",17),t.YNc(49,M,2,0,"mat-error",12),t.qZA()()(),t.TgZ(50,"div",8)(51,"div",18)(52,"mat-form-field",10)(53,"mat-label"),t._uU(54,"Instrucciones"),t.qZA(),t._UZ(55,"input",19),t.YNc(56,H,2,0,"mat-error",12),t.qZA()(),t.TgZ(57,"div",18)(58,"mat-form-field",10)(59,"mat-label"),t._uU(60,"Tipo Comida"),t.qZA(),t.TgZ(61,"mat-select",20)(62,"mat-option"),t._uU(63,"-- Seleccione un tipo de comida --"),t.qZA(),t.YNc(64,j,2,2,"mat-option",21),t.qZA(),t.YNc(65,P,2,0,"mat-error",12),t.qZA()(),t.TgZ(66,"div",22)(67,"table",23)(68,"thead")(69,"tr")(70,"th",24),t._uU(71,"#"),t.qZA(),t.TgZ(72,"th",24),t._uU(73,"Nombre "),t.qZA(),t.TgZ(74,"th")(75,"div",25)(76,"a",26),t.NdJ("click",function(){return i.sumarUno()}),t.TgZ(77,"mat-icon"),t._uU(78,"add"),t.qZA()()()()()(),t.TgZ(79,"tbody"),t.YNc(80,z,10,2,"tr",27),t.qZA()()(),t.TgZ(81,"div",28)(82,"div",18)(83,"div",29)(84,"button",30),t._uU(85," >Guardar"),t.qZA(),t.TgZ(86,"button",31),t._uU(87,"Cancelar"),t.qZA()()()()()()()()),2&r){let c,l,g,_,Z,y,L,Y;t.xp6(5),t.hij(" ",i.data.title," "),t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(7),t.Q6J("ngIf",null==(c=i.form.get("nombre"))?null:c.hasError("required")),t.xp6(6),t.Q6J("ngIf",null==(l=i.form.get("calorias"))?null:l.hasError("required")),t.xp6(7),t.Q6J("ngIf",null==(g=i.form.get("proteinas"))?null:g.hasError("required")),t.xp6(6),t.Q6J("ngIf",null==(_=i.form.get("carbohidratos"))?null:_.hasError("required")),t.xp6(7),t.Q6J("ngIf",null==(Z=i.form.get("grasas"))?null:Z.hasError("required")),t.xp6(6),t.Q6J("ngIf",null==(y=i.form.get("ingredientes"))?null:y.hasError("required")),t.xp6(7),t.Q6J("ngIf",null==(L=i.form.get("instrucciones"))?null:L.hasError("required")),t.xp6(8),t.Q6J("ngForOf",i.tipocomida),t.xp6(1),t.Q6J("ngIf",null==(Y=i.form.get("tipo_comida_id"))?null:Y.hasError("required")),t.xp6(15),t.Q6J("ngForOf",i.restricciones.controls),t.xp6(4),t.Q6J("disabled",i.form.invalid),t.xp6(2),t.Q6J("routerLink","/dashboard/recetas")}},dependencies:[u.sg,u.O5,p.rH,N.Hw,h.KE,h.hX,h.TO,F.Nt,f.lW,f.RK,f.Tq,E.gD,S.ey,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.oH,s.sg,s.u],encapsulation:2})}return e})();var $=n(9993),K=n(2596),I=n(4414);function W(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1," N\xba "),t.qZA())}function X(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const o=a.index,r=t.oxw();t.xp6(1),t.hij(" ",0===r.paginator.pageIndex?o+1:1+o+r.paginator.pageIndex*r.paginator.pageSize," ")}}function V(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1," Nombre"),t.qZA())}function tt(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.nombre," ")}}function et(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1," Categorias "),t.qZA())}function ot(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.calorias," ")}}function rt(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1," Proteinas "),t.qZA())}function it(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.proteinas," ")}}function at(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1," Carbohidratos "),t.qZA())}function nt(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.carbohidratos," ")}}function st(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1," Grasas "),t.qZA())}function ct(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.grasas," ")}}function lt(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1," Ingredientes "),t.qZA())}function mt(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.ingredientes," ")}}function dt(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1," Acciones "),t.qZA())}function ut(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",38)(1,"button",39),t.NdJ("click",function(){const c=t.CHM(o).$implicit,l=t.oxw();return t.KtG(l.editModal(c.id))}),t.TgZ(2,"mat-icon",40),t._uU(3,"mode"),t.qZA()(),t.TgZ(4,"button",41),t.NdJ("click",function(){const c=t.CHM(o).$implicit,l=t.oxw();return t.KtG(l.delete(c.id))}),t.TgZ(5,"mat-icon",40),t._uU(6,"delete"),t.qZA()()()}}function pt(e,a){1&e&&t._UZ(0,"tr",42)}function ft(e,a){1&e&&t._UZ(0,"tr",43)}const ht=()=>["Inicio"],gt=()=>[20,10,5],_t=[{path:"",component:(()=>{class e{constructor(o,r,i){this.recetasService=o,this.dialog=r,this.modalService=i,this.nombreColumna=["N\xba","Nombre","Calorias","Proteinas","Carbohidratos","Grasas","Ingredientes","Acciones"]}ngOnInit(){this.listaRecetas()}listaRecetas(){this.recetasService.getAll().subscribe(o=>{this.recetas=o,this.paginado=new m.by(o),this.paginado.paginator=this.paginator,console.log(this.recetas,"Listar Recetas")})}applyFilters(o){this.paginado.filter=o.target.value.trim().toLowerCase()}crear(){this.dialog.open(b,{data:{estado:!1,title:"Nuevo Registro"}}).afterClosed().subscribe(r=>{r&&this.listaRecetas()})}editModal(o){console.log("ID::::",o),this.dialog.open(b,{data:{estado:!0,title:"Editar Registro",id:o}}).afterClosed().subscribe(i=>{i&&this.listaRecetas()})}delete(o){d().fire({title:"\xbfEst\xe1 seguro?",text:"\xa1Esta acci\xf3n no podr\xe1 revertirce!",icon:"warning",showCancelButton:!0,confirmButtonColor:"primary",cancelButtonColor:"#d33",confirmButtonText:"Si, b\xf3rralo!",cancelButtonText:"No, cancelar!"}).then(r=>{r.isConfirmed?this.recetasService.delete(o).subscribe(i=>{console.log(i),this.listaRecetas(),d().fire("Eliminado!","Receta eliminada.","success")},i=>{d().fire({icon:"error",title:"Oops...",text:"Algo sali\xf3 mal!"})}):r.dismiss===d().DismissReason.cancel&&d().fire("Cancelado","La receta esta no se elimin\xf3.","error")})}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(q),t.Y36(C.uw),t.Y36($.FF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-listar-receta"]],viewQuery:function(r,i){if(1&r&&t.Gf(R.NW,7),2&r){let c;t.iGM(c=t.CRH())&&(i.paginator=c.first)}},decls:58,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"header"],[1,"body"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Buscador","type","text",1,"browser-default","search-field",3,"keyup"],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","ADD",1,"m-l-10"],["mat-raised-button","","color","primary",3,"click"],[1,"col-white"],[1,"table-responsive","mt-3"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","N\xba"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Nombre"],["matColumnDef","Calorias"],["matColumnDef","Proteinas"],["matColumnDef","Carbohidratos"],["matColumnDef","Grasas"],["matColumnDef","Ingredientes"],["matColumnDef","Acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",1,"me-1",3,"click"],["matSuffix",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,i){1&r&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h2")(9,"strong"),t._uU(10,"Lista de "),t.qZA(),t._uU(11," Recetas"),t.qZA()(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"ul",11)(16,"li",12)(17,"label",13)(18,"i",14),t._uU(19,"search"),t.qZA()(),t.TgZ(20,"input",15),t.NdJ("keyup",function(l){return i.applyFilters(l)}),t.qZA()()()(),t.TgZ(21,"div",16)(22,"ul",17)(23,"li",18)(24,"div",19)(25,"button",20),t.NdJ("click",function(){return i.crear()}),t.TgZ(26,"mat-icon",21),t._uU(27,"add"),t.qZA(),t._uU(28," Nuevo Registro "),t.qZA()()()()()(),t.TgZ(29,"div",22)(30,"table",23),t.ynx(31,24),t.YNc(32,W,2,0,"th",25)(33,X,2,1,"td",26),t.BQk(),t.ynx(34,27),t.YNc(35,V,2,0,"th",25)(36,tt,2,1,"td",26),t.BQk(),t.ynx(37,28),t.YNc(38,et,2,0,"th",25)(39,ot,2,1,"td",26),t.BQk(),t.ynx(40,29),t.YNc(41,rt,2,0,"th",25)(42,it,2,1,"td",26),t.BQk(),t.ynx(43,30),t.YNc(44,at,2,0,"th",25)(45,nt,2,1,"td",26),t.BQk(),t.ynx(46,31),t.YNc(47,st,2,0,"th",25)(48,ct,2,1,"td",26),t.BQk(),t.ynx(49,32),t.YNc(50,lt,2,0,"th",25)(51,mt,2,1,"td",26),t.BQk(),t.ynx(52,33),t.YNc(53,dt,2,0,"th",25)(54,ut,7,0,"td",26),t.BQk(),t.YNc(55,pt,1,0,"tr",34)(56,ft,1,0,"tr",35),t.qZA(),t._UZ(57,"mat-paginator",36),t.qZA()()()()()()()),2&r&&(t.xp6(3),t.Q6J("title","Pacientes")("items",t.DdM(7,ht))("active_item","Pacientes"),t.xp6(27),t.Q6J("dataSource",i.paginado),t.xp6(25),t.Q6J("matHeaderRowDef",i.nombreColumna),t.xp6(1),t.Q6J("matRowDefColumns",i.nombreColumna),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(8,gt)))},dependencies:[N.Hw,h.R9,f.lW,f.RK,R.NW,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,K.gM,I.L],encapsulation:2})}return e})(),canActivate:[v.a]},{path:"editar:id",component:b,canActivate:[v.a]}];let Zt=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(_t),p.Bz]})}return e})();var Ct=n(6220),bt=n(9125),Tt=n(2293),vt=n(1693);let Rt=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({providers:[u.uU],imports:[u.ez,Zt,Ct.g,s.u5,s.UX,I.L,bt.ConsultasModule,Tt.E,vt.Y]})}return e})()}}]);
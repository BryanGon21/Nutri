"use strict";(self.webpackChunkspire=self.webpackChunkspire||[]).push([[9700],{9700:(he,_,n)=>{n.r(_),n.d(_,{UsuariosModule:()=>_e});var f=n(6814),h=n(2787),Z=n(1476),m=n(5313),s=n(6223),g=n(9347),U=n(4716),y=n(3519),c=n.n(y),e=n(9212),b=n(2799),C=n(617),d=n(4170),I=n(2032),p=n(2296),R=n(8525),w=n(3680);function L(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Nombre de usuario es requerido "),e.qZA())}function J(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Pro favor ingrese un email valido "),e.qZA())}function Q(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Nombre es requerido "),e.qZA())}function B(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Apellidos es requerido "),e.qZA())}function E(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El numero de cedula de identidad es requerido "),e.qZA())}function Y(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El numero de celular es requerido "),e.qZA())}function k(t,r){if(1&t&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o.id),e.xp6(1),e.Oqu(o.display_name)}}function S(t,r){if(1&t&&(e.TgZ(0,"mat-option",31)(1,"div",33),e._uU(2),e.qZA()()),2&t){const o=r.$implicit;e.Q6J("value",o.clase),e.xp6(1),e.Udp("color",o.codigo),e.xp6(1),e.Oqu(o.nombre)}}function D(t,r){if(1&t&&(e.TgZ(0,"div",23)(1,"mat-form-field",10)(2,"mat-label"),e._uU(3,"Color"),e.qZA(),e.TgZ(4,"mat-select",32),e.YNc(5,S,3,4,"mat-option",26),e.qZA()()()),2&t){const o=e.oxw();e.xp6(5),e.Q6J("ngForOf",o.colores)}}let v=(()=>{class t{constructor(o,i,a,l){this.dialogRef=o,this.fb=i,this.userService=a,this.data=l,this.hide=!0,this.submitted=!1,this.loading=!1,this.colores=[{clase:"fc-event-primary",codigo:"#007bff",nombre:"primary"},{clase:"fc-event-warning",codigo:"#ff9800",nombre:"warning"},{clase:"fc-event-success",codigo:"#53b958",nombre:"success"},{clase:"fc-event-danger",codigo:"#f9483b",nombre:"danger"},{clase:"fc-event-info",codigo:"#03c5de",nombre:"info"},{clase:"fc-event-pink",codigo:"#ff00e1",nombre:"pink"},{clase:"fc-event-green",codigo:"#74eb0d",nombre:"green"},{clase:"fc-event-purple",codigo:"#8b53b9",nombre:"purple"},{clase:"fc-event-gray",codigo:"#878787",nombre:"gray"},{clase:"fc-event-yellow",codigo:"#e3c70e",nombre:"yellow"}],this.createForm()}close(){this.dialogRef.close()}ngOnInit(){this.listaRoles(),!0===this.data.estado&&this.getById()}getById(){this.userService.getById(this.data.id).subscribe(o=>{this.form.patchValue({username:o.username,password:"",email:o.email,nombres:o.nombres,apellidos:o.apellidos,ci:o.ci,celular:o.celular,especialidad:o.especialidad,rol_id:o.rol_id,color:o.color})})}listaRoles(){this.userService.getAllRoles().subscribe(o=>{this.roles=o})}createForm(){this.form=this.fb.group({username:["",s.kI.required],password:[""],email:["",[s.kI.email]],nombres:["",[s.kI.required,s.kI.pattern("[a-zA-Z\xf1\xd1\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda ]*")]],apellidos:["",[s.kI.required,s.kI.pattern("[a-zA-Z\xf1\xd1\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda ]*")]],ci:["",s.kI.required],celular:["",[s.kI.required,s.kI.maxLength(8),s.kI.pattern("[0-9]*")]],especialidad:[""],rol_id:["",s.kI.required],color:[""]})}registerUser(o){this.submitted=!0,this.loading=!0,!0===this.data.estado?this.userService.update(this.data.id,o).pipe((0,U.x)(()=>{this.form.markAsPristine(),this.loading=!1})).subscribe(i=>{c().fire({position:"center",icon:"success",title:"Usuario Editado con exito",showConfirmButton:!1,timer:1500}),this.dialogRef.close(i)},i=>{c().fire({icon:"error",title:"Ocurrio un problema",text:i.error}),this.submitted=!1,this.loading=!1}):this.userService.create(o).pipe((0,U.x)(()=>{this.form.markAsPristine(),this.loading=!1})).subscribe(i=>{c().fire({position:"center",icon:"success",title:"Usuario creado con exito",text:i.succes,showConfirmButton:!1,timer:1500}),this.dialogRef.close(i)},i=>{c().fire({icon:"error",title:"Ocurrio un problema",text:i.error}),this.submitted=!1,this.loading=!1})}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(g.so),e.Y36(s.qu),e.Y36(b.K),e.Y36(g.WI))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-crear-usuarios"]],decls:94,vars:14,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["mat-dialog-content",""],[1,"register-form","m-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","username","required",""],["matSuffix",""],["matInput","","formControlName","password",3,"type"],["matSuffix","",3,"click"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["matInput","","formControlName","email"],[4,"ngIf"],["matInput","","formControlName","nombres","required",""],["matInput","","formControlName","apellidos","required",""],["matInput","","formControlName","ci","required",""],["matInput","","formControlName","celular","required",""],["matInput","","formControlName","especialidad","required",""],[1,"col-md-6","mb-2"],["formControlName","rol_id"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-6 mb-2",4,"ngIf"],[1,"example-button-row"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-raised-button","","color","warn","tabindex","-1"],[3,"value"],["formControlName","color"],[2,"width","150px","height","35px"]],template:function(i,a){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Nuevo Registro "),e.qZA()()(),e.TgZ(6,"button",5),e.NdJ("click",function(){return a.dialogRef.close()}),e.TgZ(7,"mat-icon"),e._uU(8,"close"),e.qZA()()(),e.TgZ(9,"div",6)(10,"form",7),e.NdJ("ngSubmit",function(){return a.registerUser(a.form.value)}),e.TgZ(11,"div",8)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),e._uU(15,"Nombre de Usuario"),e.qZA(),e._UZ(16,"input",11),e.TgZ(17,"mat-icon",12),e._uU(18,"person"),e.qZA(),e.YNc(19,L,2,0,"mat-error"),e.qZA()(),e.TgZ(20,"div",9)(21,"mat-form-field",10)(22,"mat-label"),e._uU(23,"Password"),e.qZA(),e._UZ(24,"input",13),e.TgZ(25,"mat-icon",14),e.NdJ("click",function(){return a.hide=!a.hide}),e._uU(26),e.qZA()()()(),e.TgZ(27,"div",8)(28,"div",15)(29,"mat-form-field",10)(30,"mat-label"),e._uU(31,"Correo Electronico"),e.qZA(),e._UZ(32,"input",16),e.TgZ(33,"mat-icon",12),e._uU(34,"email"),e.qZA(),e.YNc(35,J,2,0,"mat-error",17),e.qZA()()(),e.TgZ(36,"div",8)(37,"div",9)(38,"mat-form-field",10)(39,"mat-label"),e._uU(40,"Nombre"),e.qZA(),e._UZ(41,"input",18),e.TgZ(42,"mat-icon",12),e._uU(43,"face"),e.qZA(),e.YNc(44,Q,2,0,"mat-error",17),e.qZA()(),e.TgZ(45,"div",9)(46,"mat-form-field",10)(47,"mat-label"),e._uU(48,"Apellidos"),e.qZA(),e._UZ(49,"input",19),e.TgZ(50,"mat-icon",12),e._uU(51,"face"),e.qZA(),e.YNc(52,B,2,0,"mat-error",17),e.qZA()()(),e.TgZ(53,"div",8)(54,"div",9)(55,"mat-form-field",10)(56,"mat-label"),e._uU(57,"Cedula de Identidad"),e.qZA(),e._UZ(58,"input",20),e.TgZ(59,"mat-icon",12),e._uU(60,"badge"),e.qZA(),e.YNc(61,E,2,0,"mat-error",17),e.qZA()(),e.TgZ(62,"div",9)(63,"mat-form-field",10)(64,"mat-label"),e._uU(65,"Celular"),e.qZA(),e._UZ(66,"input",21),e.TgZ(67,"mat-icon",12),e._uU(68,"phone"),e.qZA(),e.YNc(69,Y,2,0,"mat-error",17),e.qZA()()(),e.TgZ(70,"div",15)(71,"mat-form-field",10)(72,"mat-label"),e._uU(73,"Especialidad"),e.qZA(),e._UZ(74,"input",22),e.TgZ(75,"mat-icon",12),e._uU(76,"doctor"),e.qZA()()(),e.TgZ(77,"div",8)(78,"div",23)(79,"mat-form-field",10)(80,"mat-label"),e._uU(81,"Roles"),e.qZA(),e.TgZ(82,"mat-select",24)(83,"mat-option",25),e._uU(84,"Ninguno"),e.qZA(),e.YNc(85,k,2,2,"mat-option",26),e.qZA()()(),e.YNc(86,D,6,1,"div",27),e.qZA(),e.TgZ(87,"div",8)(88,"div",15)(89,"div",28)(90,"button",29),e._uU(91,"Guardar"),e.qZA(),e.TgZ(92,"button",30),e._uU(93,"Cancelar"),e.qZA()()()()()()()),2&i){let l,u,x,A,q,N;e.xp6(10),e.Q6J("formGroup",a.form),e.xp6(9),e.um2(19,null!=(l=a.form.get("username"))&&l.hasError("required")?19:-1),e.xp6(5),e.Q6J("type",a.hide?"password":"text"),e.xp6(2),e.hij(" ",a.hide?"visibility_off":"visibility"," "),e.xp6(9),e.Q6J("ngIf",(null==(u=a.form.get("email"))?null:u.hasError("required"))||(null==(u=a.form.get("email"))?null:u.touched)),e.xp6(9),e.Q6J("ngIf",null==(x=a.form.get("nombres"))?null:x.hasError("required")),e.xp6(8),e.Q6J("ngIf",null==(A=a.form.get("apellidos"))?null:A.hasError("required")),e.xp6(9),e.Q6J("ngIf",null==(q=a.form.get("ci"))?null:q.hasError("required")),e.xp6(8),e.Q6J("ngIf",null==(N=a.form.get("celular"))?null:N.hasError("required")),e.xp6(16),e.Q6J("ngForOf",a.roles),e.xp6(1),e.Q6J("ngIf",2==a.form.get("rol_id").value),e.xp6(4),e.ekj("auth-spinner",a.loading),e.Q6J("disabled",!a.form.valid||a.loading)}},dependencies:[f.sg,f.O5,C.Hw,d.KE,d.hX,d.TO,d.R9,I.Nt,p.lW,p.RK,R.gD,w.ey,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u]})}return t})();var H=n(2599),O=n(2596),T=n(4414);function F(t,r){1&t&&(e.TgZ(0,"th",38),e._uU(1," N\xba "),e.qZA())}function j(t,r){if(1&t&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&t){const o=r.index,i=e.oxw();e.xp6(1),e.hij(" ",0==i.paginator.pageIndex?o+1:1+o+i.paginator.pageIndex*i.paginator.pageSize," ")}}function $(t,r){1&t&&(e.TgZ(0,"th",38),e._uU(1," Nombre Completo "),e.qZA())}function M(t,r){if(1&t&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.hij(" ",o.nombre_completo," ")}}function z(t,r){1&t&&(e.TgZ(0,"th",38),e._uU(1," Nombre de Usuario "),e.qZA())}function G(t,r){if(1&t&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.hij(" ",o.username," ")}}function K(t,r){1&t&&(e.TgZ(0,"th",38),e._uU(1," Especialidad "),e.qZA())}function W(t,r){if(1&t&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.hij(" ",o.especialidad," ")}}function X(t,r){1&t&&(e.TgZ(0,"th",38),e._uU(1," Email "),e.qZA())}function P(t,r){if(1&t&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.hij(" ",o.email," ")}}function V(t,r){1&t&&(e.TgZ(0,"th",38),e._uU(1," Habilitado "),e.qZA())}function ee(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"td",39)(1,"mat-slide-toggle",40),e.NdJ("change",function(){const l=e.CHM(o).$implicit,u=e.oxw();return e.KtG(u.enableUser(l.id))}),e.qZA()()}if(2&t){const o=r.$implicit;e.xp6(1),e.Q6J("id",o.id)("checked",!!o.habilitado)}}function te(t,r){1&t&&(e.TgZ(0,"th",38),e._uU(1," Rol "),e.qZA())}function oe(t,r){1&t&&(e.TgZ(0,"div")(1,"span",41),e._uU(2," No tiene Rol "),e.qZA()())}function ie(t,r){if(1&t&&(e.TgZ(0,"div")(1,"span",42),e._uU(2),e.qZA()()),2&t){const o=e.oxw().$implicit;e.xp6(2),e.hij(" ",o.rol.display_name,"")}}function re(t,r){if(1&t&&(e.TgZ(0,"td",39),e.YNc(1,oe,3,0,"div")(2,ie,3,1,"div"),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.um2(1,null==o.rol_id?1:-1),e.xp6(1),e.um2(2,null!=o.rol_id?2:-1)}}function ae(t,r){1&t&&(e.TgZ(0,"th",38),e._uU(1," Acciones "),e.qZA())}function ne(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"td",39)(1,"button",43),e.NdJ("click",function(){const l=e.CHM(o).$implicit,u=e.oxw();return e.KtG(u.editar(l.id))}),e.TgZ(2,"mat-icon",44),e._uU(3,"mode"),e.qZA()(),e.TgZ(4,"button",45),e.NdJ("click",function(){const l=e.CHM(o).$implicit,u=e.oxw();return e.KtG(u.deleteUser(l.id))}),e.TgZ(5,"mat-icon",44),e._uU(6,"delete"),e.qZA()()()}}function se(t,r){1&t&&e._UZ(0,"tr",46)}function le(t,r){1&t&&e._UZ(0,"tr",47)}const me=()=>["Inicio"],ce=()=>[20,10,5],pe=[{path:"",component:(()=>{class t{constructor(o,i){this.userService=o,this.dialog=i,this.nombreColumnas=["N\xba","Nombre Completo","Nombre de Usuario","Especialidad","Email","Habilitado","Rol","Acciones"]}ngOnInit(){this.listaUsuarios()}listaUsuarios(){this.userService.getAll().subscribe(o=>{this.paginado=new m.by(o),this.paginado.paginator=this.paginator})}create(){this.dialog.open(v,{data:{estado:!1,title:"Nuevo Registro"}}).afterClosed().subscribe(i=>{i&&this.listaUsuarios()})}editar(o){this.dialog.open(v,{data:{estado:!0,title:"Editar Registro",id:o}}).afterClosed().subscribe(a=>{a&&this.listaUsuarios()})}enableUser(o){this.userService.enabled(o).subscribe(i=>{c().fire({position:"top-end",icon:"success",title:"Exito",text:i.success,showConfirmButton:!1,timer:1500}),this.listaUsuarios()},i=>{c().fire({position:"top-end",icon:"error",title:"Error ",text:i.error,showConfirmButton:!1,timer:1500}),this.listaUsuarios()})}deleteUser(o){c().fire({title:"\xbfEst\xe1 seguro?",text:"\xa1Esta acci\xf3n no podr\xe1 revertirce!",icon:"warning",showCancelButton:!0,confirmButtonColor:"primary",cancelButtonColor:"#d33",confirmButtonText:"Si, b\xf3rralo!",cancelButtonText:"No, cancelar!"}).then(i=>{i.isConfirmed?this.userService.delete(o).subscribe(a=>{c().fire("Eliminado!","Usuario eliminado.","success"),this.listaUsuarios()},a=>{c().fire({icon:"error",title:"Ocurrio un problema",text:a.error})}):i.dismiss===c().DismissReason.cancel&&c().fire("Cancelado","Registro no eliminado","error")})}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(b.K),e.Y36(g.uw))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-lista-usuarios"]],viewQuery:function(i,a){if(1&i&&e.Gf(Z.NW,7),2&i){let l;e.iGM(l=e.CRH())&&(a.paginator=l.first)}},decls:59,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row","clearfix"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"header"],[1,"body"],[1,"materialTableHeader"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Buscador","type","text","aria-label","Search box",1,"browser-default","search-field"],["filter",""],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","ADD",1,"m-l-10"],["mat-raised-button","","color","primary",3,"click"],[1,"col-white"],[1,"table-responsive","mt-3"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","N\xba"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Nombre Completo"],["matColumnDef","Nombre de Usuario"],["matColumnDef","Especialidad"],["matColumnDef","Email"],["matColumnDef","Habilitado"],["matColumnDef","Rol"],["matColumnDef","Acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[3,"id","checked","change"],[1,"badge","badge-solid-purple"],[1,"badge","badge-solid-green"],["mat-icon-button","","color","primary",1,"me-1",3,"click"],["matSuffix",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,a){1&i&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h2")(9,"strong"),e._uU(10,"Lista de "),e.qZA(),e._uU(11," Usuarios"),e.qZA()(),e.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"ul",11)(16,"li",12)(17,"label",13)(18,"i",14),e._uU(19,"search"),e.qZA()(),e._UZ(20,"input",15,16),e.qZA()()(),e.TgZ(22,"div",17)(23,"ul",18)(24,"li",19)(25,"div",20)(26,"button",21),e.NdJ("click",function(){return a.create()}),e.TgZ(27,"mat-icon",22),e._uU(28,"add"),e.qZA(),e._uU(29," Nuevo Registro "),e.qZA()()()()()(),e.TgZ(30,"div",23)(31,"table",24),e.ynx(32,25),e.YNc(33,F,2,0,"th",26)(34,j,2,1,"td",27),e.BQk(),e.ynx(35,28),e.YNc(36,$,2,0,"th",26)(37,M,2,1,"td",27),e.BQk(),e.ynx(38,29),e.YNc(39,z,2,0,"th",26)(40,G,2,1,"td",27),e.BQk(),e.ynx(41,30),e.YNc(42,K,2,0,"th",26)(43,W,2,1,"td",27),e.BQk(),e.ynx(44,31),e.YNc(45,X,2,0,"th",26)(46,P,2,1,"td",27),e.BQk(),e.ynx(47,32),e.YNc(48,V,2,0,"th",26)(49,ee,2,2,"td",27),e.BQk(),e.ynx(50,33),e.YNc(51,te,2,0,"th",26)(52,re,3,2,"td",27),e.BQk(),e.ynx(53,34),e.YNc(54,ae,2,0,"th",26)(55,ne,7,0,"td",27),e.BQk(),e.YNc(56,se,1,0,"tr",35)(57,le,1,0,"tr",36),e.qZA(),e._UZ(58,"mat-paginator",37),e.qZA()()()()()()()),2&i&&(e.xp6(3),e.Q6J("title","Usuarios")("items",e.DdM(7,me))("active_item","Usuarios"),e.xp6(28),e.Q6J("dataSource",a.paginado),e.xp6(25),e.Q6J("matHeaderRowDef",a.nombreColumnas),e.xp6(1),e.Q6J("matRowDefColumns",a.nombreColumnas),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(8,ce)))},dependencies:[C.Hw,d.R9,p.lW,p.RK,Z.NW,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,H.Rr,O.gM,T.L]})}return t})(),canActivate:[n(4368).a]}];let fe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(pe),h.Bz]})}return t})();var ge=n(6220);let _e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[f.ez,fe,ge.g,s.u5,s.UX,T.L]})}return t})()}}]);
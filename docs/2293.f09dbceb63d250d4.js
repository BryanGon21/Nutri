"use strict";(self.webpackChunkspire=self.webpackChunkspire||[]).push([[2293],{2293:(C,M,o)=>{o.d(M,{E:()=>$});var l=o(9347),s=o(6223),u=o(938),E=o(6814),_=o(6220),D=o(4716),m=o(3519),f=o.n(m),t=o(9212),P=o(9719),r=o(2799),n=o(3640),d=o(2787),b=o(617),T=o(4170),I=o(2032),R=o(2296),U=o(8525),O=o(3680),G=o(2596);function z(x,L){if(1&x&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&x){const h=L.$implicit;t.Q6J("value",h.id),t.xp6(1),t.AsE("",h.nombres," ",h.apellidos,"")}}function F(x,L){if(1&x){const h=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(h);const p=t.oxw();return t.KtG(p.cambiarEstado())}),t._uU(1," Atender Paciente "),t.qZA()}}function H(x,L){if(1&x){const h=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(h);const p=t.oxw();return p.verPerfil(null==p.paciente?null:p.paciente.paciente_id),t.KtG(p.dialogRef.close())}),t._uU(1," Ver atencion "),t.qZA()}}let $=(()=>{class x{constructor(h,g,p,w,A,N,Z){this.dialogRef=h,this.data=g,this.fb=p,this.pacienteService=w,this.userService=A,this.citaService=N,this.router=Z,this.loading=!1,this.controles(),this.listaPacientes(),this.listaMedicos(),g.estado&&this.getById()}getById(){this.citaService.getById(this.data.calendar.id).subscribe(h=>{this.paciente=h,this.form.patchValue({...h})})}controles(){this.form=this.fb.group({fecha_inicio:[this.data.estado?"":this.data.calendar.start,s.kI.required],fecha_fin:[this.data.estado?"":this.data.calendar.start,s.kI.required],observacion:[""],paciente_id:["",s.kI.required]})}listaMedicos(){this.userService.getUsuariosMedicos().subscribe(h=>{this.users=h})}listaPacientes(){this.pacienteService.getAll().subscribe(h=>{this.pacientes=h})}registrar(h){this.loading=!0,!0===this.data.estado?this.citaService.update(this.data.calendar.id,h).pipe((0,D.x)(()=>{this.form.markAsPristine(),this.loading=!1})).subscribe(g=>{f().fire({position:"center",icon:"success",title:"Registro Editado con exito",showConfirmButton:!1,timer:1500}),this.dialogRef.close(g)},g=>{f().fire({icon:"error",title:"Ocurrio un problema",text:g.error}),this.loading=!1}):this.citaService.create(h).pipe((0,D.x)(()=>{this.form.markAsPristine(),this.loading=!1})).subscribe(g=>{f().fire({position:"center",icon:"success",title:"Registro creado con exito",text:g.succes,showConfirmButton:!1,timer:1500}),this.dialogRef.close(g)},g=>{f().fire({icon:"error",title:"Ocurrio un problema",text:g.error}),this.loading=!1})}deleteCita(){f().fire({title:"\xbfEst\xe1 seguro?",text:"\xa1Esta acci\xf3n no podr\xe1 revertirce!",icon:"warning",showCancelButton:!0,confirmButtonColor:"primary",cancelButtonColor:"#d33",confirmButtonText:"Si, b\xf3rralo!",cancelButtonText:"No, cancelar!"}).then(h=>{h.isConfirmed?this.citaService.delete(this.data.calendar.id).subscribe(g=>{f().fire("Eliminado!",g.success,"success"),this.dialogRef.close(g)},g=>{f().fire({icon:"error",title:"Ocurrio un problema",text:g.error})}):h.dismiss===f().DismissReason.cancel&&f().fire("Cancelado","Registro no eliminado","error")})}verPerfil(h){this.router.navigate(["/dashboard/pacientes/informacion",h])}cambiarEstado(){f().fire({title:"\xbfEst\xe1 seguro?",text:"\xa1Esta acci\xf3n no podr\xe1 revertirce!",icon:"warning",showCancelButton:!0,confirmButtonColor:"primary",cancelButtonColor:"#d33",confirmButtonText:"Si, Atender!",cancelButtonText:"No, cancelar!"}).then(h=>{h.isConfirmed?this.citaService.estadoEnCurso({cita_id:this.data.calendar.id}).subscribe(g=>{f().fire("Exito!",g.success,"success"),this.verPerfil(this.paciente?.paciente_id),this.dialogRef.close(g)},g=>{f().fire({icon:"error",title:"Ocurrio un problema",text:g.error})}):h.dismiss===f().DismissReason.cancel&&f().fire("Cancelado","Registro no cambio de estado","error")})}static#t=this.\u0275fac=function(g){return new(g||x)(t.Y36(l.so),t.Y36(l.WI),t.Y36(s.qu),t.Y36(P.t),t.Y36(r.K),t.Y36(n.k),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:x,selectors:[["app-form-dialog"]],standalone:!0,features:[t.jDz],decls:56,vars:12,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modal-about"],["mat-icon-button","","aria-label","Close dialog",1,"modal-close-button",3,"click"],["mat-dialog-content",""],[1,"register-form","m-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],["appearance","outline",1,"example-full-width","mb-3"],["formControlName","paciente_id","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12"],["matInput","","formControlName","fecha_inicio","placeholder","Choose a date","required","",3,"owlDateTimeTrigger","owlDateTime"],["matSuffix","",1,"date-icon",3,"owlDateTimeTrigger"],["fechaInicio",""],["matInput","","formControlName","fecha_fin","placeholder","Choose a date","required","",3,"owlDateTimeTrigger","owlDateTime"],["fechaFin",""],["matInput","","formControlName","observacion"],["matSuffix","",1,"material-icons-two-tone","color-icon","p-3"],[1,"col-xl-10","col-lg-10","col-md-12","col-sm-12"],[1,"example-button-row"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","color","accent","type","button","matTooltip","Consultas del paciente","class","me-1",3,"click",4,"ngIf"],[1,"row","mt-3"],[1,"col-xl-2","col-lg-2","col-md-12","col-sm-12",2,"position","relative","top","-60px","margin-left","auto"],["mat-icon-button","","color","warn","type","button",3,"click"],[3,"value"],["mat-raised-button","","color","accent","type","button","matTooltip","Consultas del paciente",1,"me-1",3,"click"]],template:function(g,p){if(1&g&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"div",3),t._uU(5),t.qZA()()(),t.TgZ(6,"button",4),t.NdJ("click",function(){return p.dialogRef.close()}),t.TgZ(7,"mat-icon"),t._uU(8,"close"),t.qZA()()(),t.TgZ(9,"div",5)(10,"form",6),t.NdJ("ngSubmit",function(){return p.registrar(p.form.value)}),t.TgZ(11,"div",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label"),t._uU(15,"Pacientes"),t.qZA(),t.TgZ(16,"mat-select",10),t.YNc(17,z,2,3,"mat-option",11),t.qZA()()()(),t.TgZ(18,"div",7)(19,"div",12)(20,"mat-form-field",9)(21,"mat-label"),t._uU(22,"Fecha Inicio"),t.qZA(),t._UZ(23,"input",13),t.TgZ(24,"mat-icon",14),t._uU(25,"today"),t.qZA(),t._UZ(26,"owl-date-time",null,15),t.qZA()(),t.TgZ(28,"div",12)(29,"mat-form-field",9)(30,"mat-label"),t._uU(31,"Fecha Fin"),t.qZA(),t._UZ(32,"input",16),t.TgZ(33,"mat-icon",14),t._uU(34,"today"),t.qZA(),t._UZ(35,"owl-date-time",null,17),t.qZA()()(),t.TgZ(37,"div",7)(38,"div",8)(39,"mat-form-field",9)(40,"mat-label"),t._uU(41,"Observacion"),t.qZA(),t._UZ(42,"input",18)(43,"mat-icon",19),t.qZA()()(),t.TgZ(44,"div",7)(45,"div",20)(46,"div",21)(47,"button",22),t._uU(48,"Guardar"),t.qZA(),t.YNc(49,F,2,0,"button",23)(50,H,2,0,"button",23),t.qZA()()()(),t.TgZ(51,"div",24)(52,"div",25)(53,"button",26),t.NdJ("click",function(){return p.deleteCita()}),t.TgZ(54,"mat-icon"),t._uU(55,"delete"),t.qZA()()()()()()),2&g){const w=t.MAs(27),A=t.MAs(36);t.xp6(5),t.hij(" ",p.data.title," "),t.xp6(5),t.Q6J("formGroup",p.form),t.xp6(7),t.Q6J("ngForOf",p.pacientes),t.xp6(6),t.Q6J("owlDateTimeTrigger",w)("owlDateTime",w),t.xp6(1),t.Q6J("owlDateTimeTrigger",w),t.xp6(8),t.Q6J("owlDateTimeTrigger",A)("owlDateTime",A),t.xp6(1),t.Q6J("owlDateTimeTrigger",A),t.xp6(14),t.Q6J("disabled",!p.form.valid||p.loading),t.xp6(2),t.Q6J("ngIf",p.data.estado&&"EN ESPERA"==(null==p.paciente?null:p.paciente.estado)),t.xp6(1),t.Q6J("ngIf",p.data.estado&&"EN CURSO"==(null==p.paciente?null:p.paciente.estado))}},dependencies:[E.ez,E.sg,E.O5,_.g,b.Hw,T.KE,T.hX,T.R9,I.Nt,R.lW,R.RK,U.gD,O.ey,G.gM,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.UX,s.sg,s.u,u.Ll,u.sZ,u.BO,u.hV,u.x]})}return x})()},585:(C,M,o)=>{o.d(M,{B:()=>f});var l=o(9862),s=o(7398);const _=((new l.LE).set("paginacion",String(17)),(new l.LE).set("paginacion","17"));var m=o(9212);let f=(()=>{class t{constructor(r){this.httpClient=r}getAll(r){let n="";if(r){const d=Object.keys(r);d.length>0&&(n="?"),d.forEach((b,T)=>{null!=r[b]&&r[b].toString().length&&(n+=`${b}=${r[b]}&`)}),d.length>0&&"&"===n[n.length-1]&&(n=n.slice(0,-1))}return this.httpClient.get(`${this.baseUrl}${n}`).pipe((0,s.U)(d=>d))}getById(r,n){let d="";if(n){const b=Object.keys(n);b.length>0&&(d="?"),b.forEach((T,I)=>{null!=n[T]&&n[T].toString().length&&(d+=`${T}=${n[T]}&`)}),b.length>0&&"&"===d[d.length-1]&&(d=d.slice(0,-1))}return this.httpClient.get(`${this.baseUrl}/${r}${d}`).pipe((0,s.U)(b=>b))}create(r){return this.httpClient.post(this.baseUrl,r).pipe((0,s.U)(n=>n))}update(r,n){return this.httpClient.put(`${this.baseUrl}/${r}`,n).pipe((0,s.U)(d=>d))}updatePost(r,n){return this.httpClient.post(`${this.baseUrl}/${r}`,n).pipe((0,s.U)(d=>d))}delete(r){return this.httpClient.delete(`${this.baseUrl}/${r}`).pipe((0,s.U)(n=>n))}deleteAll(){return this.httpClient.delete(`${this.baseUrl}/all`).pipe((0,s.U)(r=>r))}enabled(r){return this.httpClient.get(`${this.baseUrl}/habilitar/${r}`).pipe((0,s.U)(n=>n))}nextPage(r){console.log("URL",r);const n=(new l.WM).set("paginate",String(!0)).set("totalPagina",String(10));return this.httpClient.get(r,{headers:n,params:_})}getEnabledList(){return this.httpClient.get(`${this.baseUrl}/habilitados`)}static#t=this.\u0275fac=function(n){return new(n||t)(m.LFG(l.eN))};static#e=this.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac})}return t})()},4400:(C,M,o)=>{o.d(M,{B:()=>l.B});var l=o(585)},3640:(C,M,o)=>{o.d(M,{k:()=>E});var l=o(4400),s=o(9212),u=o(9862);let E=(()=>{class _ extends l.B{constructor(m){super(m),this.httpClient=m,this.baseUrl="/citas"}estadoEnCurso(m){return this.httpClient.post(this.baseUrl+"/encurso",m)}estadoTerminado(m){return this.httpClient.post(this.baseUrl+"/terminar",m)}citas_medico(){return this.httpClient.get(this.baseUrl+"/medico")}static#t=this.\u0275fac=function(f){return new(f||_)(s.LFG(u.eN))};static#e=this.\u0275prov=s.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},9719:(C,M,o)=>{o.d(M,{t:()=>E});var l=o(4400),s=o(9212),u=o(9862);let E=(()=>{class _ extends l.B{constructor(m){super(m),this.httpClient=m,this.baseUrl="/pacientes"}getPDF(m){return this.httpClient.get(this.baseUrl+"/pdf/"+m,{responseType:"blob"})}static#t=this.\u0275fac=function(f){return new(f||_)(s.LFG(u.eN))};static#e=this.\u0275prov=s.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},2799:(C,M,o)=>{o.d(M,{K:()=>E});var l=o(585),s=o(9212),u=o(9862);let E=(()=>{class _ extends l.B{constructor(m){super(m),this.httpClient=m,this.baseUrl="/users"}getAllRoles(){return this.httpClient.get(this.baseUrl+"/roles")}getUsuariosMedicos(){return this.httpClient.get(this.baseUrl+"/medicos")}registrarUsuario(m){return this.httpClient.post(this.baseUrl+"/register",m)}cambiarPassword(m){return this.httpClient.post(`${this.baseUrl}/change-password`,m)}static#t=this.\u0275fac=function(f){return new(f||_)(s.LFG(u.eN))};static#e=this.\u0275prov=s.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},6220:(C,M,o)=>{o.d(M,{g:()=>tt});var l=o(617),s=o(9212),u=o(3680);let P=(()=>{class c{static#t=this.\u0275fac=function(a){return new(a||c)};static#e=this.\u0275mod=s.oAB({type:c});static#i=this.\u0275inj=s.cJS({imports:[u.BQ,u.BQ]})}return c})();var r=o(1545),n=o(4170),d=o(2032),b=o(4104),T=o(5195),I=o(2296),R=o(1476),U=o(5313),O=o(2599),G=o(8525),z=o(8034);let Q=(()=>{class c{static#t=this.\u0275fac=function(a){return new(a||c)};static#e=this.\u0275mod=s.oAB({type:c});static#i=this.\u0275inj=s.cJS({imports:[u.uc,u.BQ,u.uc,u.BQ]})}return c})();var k=o(5940),j=o(4630),J=o(5986),Y=o(5287),V=o(3452),X=o(9014),q=o(2596);let tt=(()=>{class c{static#t=this.\u0275fac=function(a){return new(a||c)};static#e=this.\u0275mod=s.oAB({type:c});static#i=this.\u0275inj=s.cJS({imports:[P,l.Ps,r.T5,n.lN,d.c,b.Nh,T.QW,P,l.Ps,r.T5,n.lN,d.c,b.Nh,T.QW,I.ot,R.TU,U.p0,O.rP,G.LD,z.FA,Q,k.Cq,j.Bb,J.p9,Y.To,V.XD,q.AV,X.g]})}return c})()},9014:(C,M,o)=>{o.d(M,{g:()=>f,k:()=>m});var l=o(9212),s=o(3680),u=o(4300),E=o(6814);let _=0;const D="mat-badge-content";let m=(()=>{class t{get color(){return this._color}set color(r){this._setColor(r),this._color=r}get content(){return this._content}set content(r){this._updateRenderedContent(r)}get description(){return this._description}set description(r){this._updateDescription(r)}constructor(r,n,d,b,T){this._ngZone=r,this._elementRef=n,this._ariaDescriber=d,this._renderer=b,this._animationMode=T,this._color="primary",this.overlap=!0,this.position="above after",this.size="medium",this._id=_++,this._isInitialized=!1,this._interactivityChecker=(0,l.f3M)(u.ic),this._document=(0,l.f3M)(E.K0)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){const r=this._renderer.createElement("span"),n="mat-badge-active";return r.setAttribute("id",`mat-badge-content-${this._id}`),r.setAttribute("aria-hidden","true"),r.classList.add(D),"NoopAnimations"===this._animationMode&&r.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(r),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{r.classList.add(n)})}):r.classList.add(n),r}_updateRenderedContent(r){const n=`${r??""}`.trim();this._isInitialized&&n&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=n),this._content=n}_updateDescription(r){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!r||this._isHostInteractive())&&this._removeInlineDescription(),this._description=r,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,r):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(r){const n=this._elementRef.nativeElement.classList;n.remove(`mat-badge-${this._color}`),r&&n.add(`mat-badge-${r}`)}_clearExistingBadges(){const r=this._elementRef.nativeElement.querySelectorAll(`:scope > .${D}`);for(const n of Array.from(r))n!==this._badgeElement&&n.remove()}static#t=this.\u0275fac=function(n){return new(n||t)(l.Y36(l.R0b),l.Y36(l.SBq),l.Y36(u.$s),l.Y36(l.Qsj),l.Y36(l.QbO,8))};static#e=this.\u0275dir=l.lG2({type:t,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(n,d){2&n&&l.ekj("mat-badge-overlap",d.overlap)("mat-badge-above",d.isAbove())("mat-badge-below",!d.isAbove())("mat-badge-before",!d.isAfter())("mat-badge-after",d.isAfter())("mat-badge-small","small"===d.size)("mat-badge-medium","medium"===d.size)("mat-badge-large","large"===d.size)("mat-badge-hidden",d.hidden||!d.content)("mat-badge-disabled",d.disabled)},inputs:{color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap",l.VuI],disabled:["matBadgeDisabled","disabled",l.VuI],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden",l.VuI]},features:[l.Xq5]})}return t})(),f=(()=>{class t{static#t=this.\u0275fac=function(n){return new(n||t)};static#e=this.\u0275mod=l.oAB({type:t});static#i=this.\u0275inj=l.cJS({imports:[u.rt,s.BQ,s.BQ]})}return t})()}}]);